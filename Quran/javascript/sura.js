let sizeValue,openBtn=document.querySelector(".open-div"),selectSura=document.querySelector(".select-sura"),suraContent=document.querySelector(".sura-content"),rightBtn=document.querySelector(".rightBtn"),leftBtn=document.querySelector(".leftBtn"),ayaName=document.querySelector(".aya-name"),suraText=document.querySelector(".sura-text"),suraDetails=document.querySelector(".sura-details"),suarAnimation=document.querySelector(".lds-ripple"),secondAnimation=document.querySelector(".lds-dual-ring"),pagination=document.querySelector(".sura-content .pagination"),sizeSelect=document.querySelector("#size"),allOptions=document.querySelectorAll("#size option"),goSaveBtn=document.querySelector(".goSave");if(localStorage.getItem("font-size")){let e=JSON.parse(localStorage.getItem("font-size"));sizeValue=e.value,suraText.style.fontSize=sizeValue,allOptions.forEach((e=>{e.innerText.trim()==sizeValue&&(e.selected=!0)}))}sizeSelect.addEventListener("change",(()=>{sizeValue=sizeSelect.value;let e={value:sizeValue};localStorage.setItem("font-size",JSON.stringify(e)),suraText.style.fontSize=`${e.value}`}));let isClick=!0;openBtn.addEventListener("click",(()=>{isClick?(isClick=!1,openBtn.className="fa-solid fa-xmark open-div"):(isClick=!0,openBtn.className="fa-solid fa-bars open-div"),selectSura.classList.toggle("active"),suraContent.classList.toggle("hid")}));let favSura,makaType="",ayaCount="",ayaText=[],nameAya="";function getData(){suarAnimation.classList.add("active"),fetch("http://api.alquran.cloud/v1/quran/en.asad").then((e=>e.json())).then((e=>{suarAnimation.classList.remove("active"),pagination.classList.add("active");for(let t=0;t<e.data.surahs.length;t++){makaType="Meccan"==e.data.surahs[t].revelationType?"مكية":"مدنية",ayaCount=e.data.surahs[t].ayahs.length<=10?"ايات":"ايه";let a=`\n            <div class="aya-box flex" id = '${t+1}'>\n            <div class="aya-count">\n              <span>${makaType} / ${e.data.surahs[t].ayahs.length} ${ayaCount}</span>\n            </div>\n            <p>${e.data.surahs[t].name}</p>\n          </div>\n        `;suraDetails.innerHTML+=a}let t,a=suraDetails.querySelectorAll(".aya-box");if(localStorage.getItem("saveDetail")){let e=JSON.parse(localStorage.getItem("saveDetail"));setTimeout((()=>{a[e[0].suraIndx].click()}),10),setTimeout((()=>{suraContent.scrollTop=e[0].suraScroll}),500)}else setTimeout((()=>{a[0].click()}),100);function s(e){a[e].click()}goSaveBtn.addEventListener("click",(()=>{if(localStorage.getItem("saveDetail")){let e=JSON.parse(localStorage.getItem("saveDetail"));a[e[0].suraIndx].click(),setTimeout((()=>{suraContent.scrollTop=e[0].suraScroll}),500),goSaveBtn.classList.add("hid")}})),a.forEach(((e,n)=>{e.addEventListener("click",(l=>{selectSura.classList.remove("active"),suraContent.classList.remove("hid"),goSaveBtn.classList.remove("hid"),openBtn.className="fa-solid fa-bars open-div",isClick=!0,suraText.innerHTML="",ayaName.innerHTML="",secondAnimation.classList.add("active"),window.screen.width>991&&selectSura.scrollTo({top:e.offsetTop,behavior:"smooth"}),a.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),fetch(`https://api.alquran.cloud/v1/surah/${n+1}/ar.alafasy`).then((e=>e.json())).then((e=>{secondAnimation.classList.remove("active"),ayaText=[],t=n;let l=e.data.ayahs;for(let e=0;e<l.length;e++)ayaText.push(l[e].text);let i="";ayaText.forEach(((e,t)=>{i+=`${e}<span>(${t+1})</span>`}));let o=`\n                <img src= 'imgs/ayastart.png' title = 'بسم الله الرحمن الرحيم'>\n                <div>${i}</div>\n                <img src= 'imgs/ayaend.png' title = 'صدق الله العظيم'>\n\n              `;suraText.innerHTML=o,ayaName.innerHTML=`\n                ${e.data.name}\n                <i class="fa-regular fa-bookmark" title ='حفظ السوره' id= '${t}'></i>\n                `;let r=[],c=ayaName.querySelector("i"),u=suraContent.scrollTop;c.onclick=function(){let e={suraIndx:c.id,suraScroll:u};r.push(e);let t=r.slice(-1);localStorage.setItem("saveDetail",JSON.stringify(t)),goSaveBtn.classList.remove("hid"),Swal.fire({position:"center",icon:"success",title:"تم الحفظ",showConfirmButton:!1,timer:1500})},suraContent.addEventListener("scroll",(()=>{u=suraContent.scrollTop})),rightBtn.onclick=function(){t++,t<a.length||(t=0),s(t)},leftBtn.onclick=function(){0!=t?(t--,s(t)):(t=a.length-1,s(t))}}))}))})),document.addEventListener("keydown",(e=>{"ArrowRight"==e.code?rightBtn.click():"ArrowLeft"==e.code&&leftBtn.click()}))}))}getData();